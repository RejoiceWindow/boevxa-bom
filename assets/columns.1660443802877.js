import{q as j,u as O,s as b,H as U,_ as F}from"./index.1660443802877.js";import{A as q}from"./aside.1660443802877.js";import{H as z,M as E}from"./main.1660443802877.js";import{P as T,r as S,aD as G,aG as W,f as J,w as K,y as Q,o as X,aI as Y,t as Z,g as ee,n as te,a8 as c,j as f,k as v,a1 as d,W as H,l as C,I as se,ab as ne,R as _,a0 as R,h as oe,V as I,_ as B}from"./vue.1660443802877.js";import"./logo-mini.1660443802877.js";import"./parent.1660443802877.js";const le=T({name:"layoutColumnsAside",setup(){const e=S([]),m=S(),{proxy:i}=ee(),p=j(),$=O(),{routesList:M,isColumnsMenuHover:h,isColumnsNavHover:A}=b(p),{themeConfig:n}=b($),a=G(),u=W(),s=J({columnsAsideList:[],liIndex:0,liOldIndex:null,liHoverIndex:null,liOldPath:null,difference:0,routeSplit:[]}),g=t=>{s.liIndex=t,m.value.style.top=`${e.value[t].offsetTop+s.difference}px`},D=(t,o)=>{g(o);let{path:l,redirect:r}=t;r?u.push(r):u.push(l)},w=(t,o)=>{let{path:l}=t;s.liOldPath=l,s.liOldIndex=o,s.liHoverIndex=o,i.mittBus.emit("setSendColumnsChildren",y(l)),p.setColumnsMenuHover(!1),p.setColumnsNavHover(!0)},N=async()=>{await p.setColumnsNavHover(!1),setTimeout(()=>{!h&&!A&&i.mittBus.emit("restoreDefault")},100)},k=t=>{te(()=>{g(t)})},P=()=>{s.columnsAsideList=L(M.value);const t=y(a.path);if(Object.keys(t).length<=0)return!1;k(t.item[0].k),i.mittBus.emit("setSendColumnsChildren",t)},y=t=>{const o=t.split("/");let l={};return s.columnsAsideList.map((r,V)=>{r.path===`/${o[1]}`&&(r.k=V,l.item=[{...r}],l.children=[{...r}],r.children&&(l.children=r.children))}),l},L=t=>t.filter(o=>!o.meta.isHide).map(o=>(o=Object.assign({},o),o.children&&(o.children=L(o.children)),o)),x=t=>{s.routeSplit=t.split("/"),s.routeSplit.shift();const o=`/${s.routeSplit[0]}`,l=s.columnsAsideList.find(r=>r.path===o);if(!l)return!1;setTimeout(()=>{k(l.k)},0)};return K(U.state,t=>{if(t.themeConfig.themeConfig.columnsAsideStyle==="columnsRound"?s.difference=3:s.difference=0,!t.routesList.isColumnsMenuHover&&!t.routesList.isColumnsNavHover)s.liHoverIndex=null,i.mittBus.emit("setSendColumnsChildren",y(a.path));else{if(s.liHoverIndex=s.liOldIndex,!s.liOldPath)return!1;i.mittBus.emit("setSendColumnsChildren",y(s.liOldPath))}},{deep:!0}),Q(()=>{P(),i.mittBus.on("restoreDefault",()=>{s.liOldIndex=null,s.liOldPath=null})}),X(()=>{i.mittBus.off("restoreDefault",()=>{})}),Y(t=>{x(t.path),i.mittBus.emit("setSendColumnsChildren",y(t.path))}),{themeConfig:n,columnsAsideOffsetTopRefs:e,columnsAsideActiveRef:m,onColumnsAsideDown:k,onColumnsAsideMenuClick:D,onColumnsAsideMenuMouseenter:w,onColumnsAsideMenuMouseleave:N,...Z(s)}}}),ie={class:"layout-columns-aside"},ae=["onClick","onMouseenter","title"],re={class:"columns-vertical-title font12"},ue=["href"],ce={class:"columns-vertical-title font12"};function de(e,m,i,p,$,M){const h=c("SvgIcon"),A=c("el-scrollbar");return f(),v("div",ie,[d(A,null,{default:H(()=>[C("ul",{onMouseleave:m[0]||(m[0]=n=>e.onColumnsAsideMenuMouseleave())},[(f(!0),v(se,null,ne(e.columnsAsideList,(n,a)=>(f(),v("li",{key:a,onClick:u=>e.onColumnsAsideMenuClick(n,a),onMouseenter:u=>e.onColumnsAsideMenuMouseenter(n,a),ref_for:!0,ref:u=>{u&&(e.columnsAsideOffsetTopRefs[a]=u)},class:_({"layout-columns-active":e.liIndex===a,"layout-columns-hover":e.liHoverIndex===a}),title:e.$t(n.meta.title)},[!n.meta.isLink||n.meta.isLink&&n.meta.isIframe?(f(),v("div",{key:0,class:_(e.themeConfig.columnsAsideLayout)},[d(h,{name:n.meta.icon},null,8,["name"]),C("div",re,R(e.$t(n.meta.title)&&e.$t(n.meta.title).length>=4?e.$t(n.meta.title).substr(0,e.themeConfig.columnsAsideLayout==="columns-vertical"?4:3):e.$t(n.meta.title)),1)],2)):(f(),v("div",{key:1,class:_(e.themeConfig.columnsAsideLayout)},[C("a",{href:n.meta.isLink,target:"_blank"},[d(h,{name:n.meta.icon},null,8,["name"]),C("div",ce,R(e.$t(n.meta.title)&&e.$t(n.meta.title).length>=4?e.$t(n.meta.title).substr(0,e.themeConfig.columnsAsideLayout==="columns-vertical"?4:3):e.$t(n.meta.title)),1)],8,ue)],2))],42,ae))),128)),C("div",{ref:"columnsAsideActiveRef",class:_(e.themeConfig.columnsAsideStyle)},null,2)],32)]),_:1})])}var me=F(le,[["render",de],["__scopeId","data-v-07532e16"]]);const fe=T({name:"layoutColumns",components:{Aside:q,Header:z,Main:E,ColumnsAside:me},setup(){const e=O(),{themeConfig:m}=b(e);return{isFixedHeader:oe(()=>m.value.isFixedHeader)}}}),pe={class:"layout-columns-warp"};function he(e,m,i,p,$,M){const h=c("ColumnsAside"),A=c("Aside"),n=c("Header"),a=c("Main"),u=c("el-scrollbar"),s=c("el-container"),g=c("el-backtop");return f(),I(s,{class:"layout-container"},{default:H(()=>[d(h),C("div",pe,[d(A),d(s,{class:_(["flex-center layout-backtop",{"layout-backtop":!e.isFixedHeader}])},{default:H(()=>[e.isFixedHeader?(f(),I(n,{key:0})):B("",!0),d(u,{class:_({"layout-backtop":e.isFixedHeader})},{default:H(()=>[e.isFixedHeader?B("",!0):(f(),I(n,{key:0})),d(a)]),_:1},8,["class"])]),_:1},8,["class"])]),d(g,{target:".layout-backtop .el-scrollbar__wrap"})]),_:1})}var He=F(fe,[["render",he]]);export{He as default};
