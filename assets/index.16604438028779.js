import{_ as I,v as b,b as C,j as y}from"./index.1660443802877.js";import{T as V,G as h}from"./TrayInfo.1660443802877.js";import{P as S,r as F,f as B,w as T,t as k,k as q,a1 as t,W as s,a8 as n,j as A,l as o,$ as u,a0 as l,aB as Q,aC as E}from"./vue.1660443802877.js";import"./print.1660443802877.js";import"./qrcode.1660443802877.js";const M=S({name:"operateEntry",components:{QrStream:b.exports.QrStream,TrayInfo:V},setup(){const e=F(!1);C();const a=B({trayData:{FMaterialId:"",FLot:0,sp_mo:"",expires:""},qrData:"14261000002A,1,ABD03K1003FT,2022-06-02",camera:"auto",tempData:null}),D=async()=>{e.value=!0},v=async()=>{e.value=!1,a.qrData&&p(a.qrData)};function p(c){const r=c.split(",");a.qrData=c,e.value=!1,h({FMaterialId:r[0]}).then(_=>{const i=_.data.data[0];i&&i.id?(a.trayData=i,a.trayData.FMaterialId=r[0],a.trayData.FLot=r[1],a.trayData.sp_mo=r[2],a.trayData.expires=r[3],y({showClose:!0,message:"\u83B7\u53D6\u4FE1\u606F\u6210\u529F",center:!0,type:"success"})):y({showClose:!0,message:"\u4E0D\u5B58\u5728\u6B64\u4FE1\u606F\uFF0C\u8BF7\u624B\u52A8\u8F93\u5165",center:!0,type:"error"})})}T(()=>e.value,()=>{setTimeout(()=>{e.value?a.camera="auto":a.camera="off"},500)});const f=F(!1),d=()=>{h({}).then(c=>{a.tempData=c}),f.value=!0};return{ScanQr:D,dialogFormVisible:e,...k(a),onDecode:p,drawer:f,tempDataGet:d,ScanConfirm:v}},data(){return{}}}),R=e=>(Q("data-v-166b6e41"),e=e(),E(),e),x={class:"home-container"},G={class:"home-card-item flex"},L={class:"flex-margin flex w100"},N={class:"flex-auto"},j={class:"result"},K={class:"dialog-footer"},U={class:"home-card-item flex"},P={class:"flex-margin flex w100"},W={class:"flex-auto"},z=R(()=>o("span",{class:"iconify","data-icon":"ion:arrow-forward-circle-outline"},null,-1));function H(e,a,D,v,p,f){const d=n("el-button"),c=n("QrStream"),r=n("el-input"),_=n("el-dialog"),i=n("el-col"),g=n("el-row"),$=n("TrayInfo"),w=n("el-card");return A(),q("div",x,[t(g,{gutter:15,class:"home-card-one mb15"},{default:s(()=>[t(i,{xs:12,sm:6,md:6,lg:3,xl:3},{default:s(()=>[o("div",G,[o("div",L,[o("div",N,[t(d,{type:"success",onClick:e.ScanQr},{default:s(()=>[u(l(e.$t("message.operateAction.scan")),1)]),_:1},8,["onClick"]),t(_,{modelValue:e.dialogFormVisible,"onUpdate:modelValue":a[2]||(a[2]=m=>e.dialogFormVisible=m)},{footer:s(()=>[o("span",K,[t(d,{onClick:a[1]||(a[1]=m=>e.dialogFormVisible=!1)},{default:s(()=>[u(l(e.$t("message.button.cancel")),1)]),_:1}),t(d,{type:"primary",onClick:e.ScanConfirm},{default:s(()=>[u(l(e.$t("message.button.confirm")),1)]),_:1},8,["onClick"])])]),default:s(()=>[t(c,{onDecode:e.onDecode,camera:e.camera},null,8,["onDecode","camera"]),o("div",j,[o("span",null,l(e.$t("app.operateInfo.scanResults"))+":",1),u(" "+l(e.qrData)+" ",1),t(r,{modelValue:e.qrData,"onUpdate:modelValue":a[0]||(a[0]=m=>e.qrData=m),placeholder:`${e.$t("message.info.qrData")}, ${e.$t("message.info.notice")}: 14261000002A,1,ABD03K1003FT,2022-06-02`,clearable:""},null,8,["modelValue","placeholder"])])]),_:1},8,["modelValue"])])])])]),_:1}),t(i,{xs:24,sm:12,md:12,lg:6,xl:6},{default:s(()=>[o("div",U,[o("div",P,[o("div",W,[z,o("span",null,l(e.$t("message.operateInfo.scanResults"))+":",1),u(" "+l(e.qrData),1)])])])]),_:1})]),_:1}),t(g,{gutter:15,class:"home-card-two mb15"},{default:s(()=>[t(w,{shadow:"hover",header:e.$t("message.operateInfo.trayInfoTitle")},{default:s(()=>[t($,{trayData:e.trayData},null,8,["trayData"])]),_:1},8,["header"])]),_:1})])}var ee=I(M,[["render",H],["__scopeId","data-v-166b6e41"]]);export{ee as default};
