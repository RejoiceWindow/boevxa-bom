import{P as T,aD as q,f as W,h as S,w,y as H,aI as N,t as M,a8 as d,j as g,V as L,W as y,k as B,ab as P,I as k,a1 as b,l as A,a0 as $,ac as j,O,g as z,X as U,Y as X,_ as Y,R as x}from"./vue.1660443802877.js";import{u as V,s as _,_ as I,q as G,c as J,H as K}from"./index.1660443802877.js";import{S as Q,L as Z}from"./main.1660443802877.js";const ee=T({name:"navMenuVertical",components:{SubItem:Q},props:{menuList:{type:Array,default:()=>[]}},setup(t){const l=V(),{themeConfig:m}=_(l),f=q(),u=W({defaultActive:f.meta.isDynamic?f.meta.isDynamicPath:f.path,isCollapse:!1}),i=S(()=>t.menuList),p=S(()=>m.value),o=r=>{const{path:a,meta:c}=r,s=c.isDynamic?c.isDynamicPath.split("/"):a.split("/");return s.length>=4&&c.isHide?s.splice(0,3).join("/"):a};return w(m.value,()=>{document.body.clientWidth<=1e3?u.isCollapse=!1:u.isCollapse=m.value.isCollapse},{immediate:!0}),H(()=>{u.defaultActive=o(f)}),N(r=>{u.defaultActive=o(r),document.body.clientWidth<1e3&&(m.value.isCollapse=!1)}),{menuLists:i,getThemeConfig:p,...M(u)}}});function te(t,l,m,f,u,i){const p=d("SvgIcon"),o=d("SubItem"),r=d("el-sub-menu"),a=d("el-menu-item"),c=d("el-menu");return g(),L(c,{router:"","default-active":t.defaultActive,"background-color":"transparent",collapse:t.isCollapse,"unique-opened":t.getThemeConfig.isUniqueOpened,"collapse-transition":!1},{default:y(()=>[(g(!0),B(k,null,P(t.menuLists,s=>(g(),B(k,null,[s.children&&s.children.length>0?(g(),L(r,{index:s.path,key:s.path},{title:y(()=>[b(p,{name:s.meta.icon},null,8,["name"]),A("span",null,$(t.$t(s.meta.title)),1)]),default:y(()=>[b(o,{chil:s.children},null,8,["chil"])]),_:2},1032,["index"])):(g(),L(a,{index:s.path,key:s.path},j({default:y(()=>[b(p,{name:s.meta.icon},null,8,["name"])]),_:2},[!s.meta.isLink||s.meta.isLink&&s.meta.isIframe?{name:"title",fn:y(()=>[A("span",null,$(t.$t(s.meta.title)),1)])}:{name:"title",fn:y(()=>[A("a",{href:s.meta.isLink,target:"_blank",rel:"opener",class:"w100"},$(t.$t(s.meta.title)),9,["href"])])}]),1032,["index"]))],64))),256))]),_:1},8,["default-active","collapse","unique-opened"])}var se=I(ee,[["render",te]]);const ne=T({name:"layoutAside",components:{Logo:Z,Vertical:se},setup(){const{proxy:t}=z(),l=G(),m=V(),f=J(),{routesList:u}=_(l),{themeConfig:i}=_(m),{isTagsViewCurrenFull:p}=_(f),o=W({menuList:[],clientWidth:0}),r=S(()=>{const{layout:e,isCollapse:n,menuBar:h}=i.value,C=["#FFFFFF","#FFF","#fff","#ffffff"].includes(h)?"layout-el-aside-br-color":"";if(o.clientWidth<=1e3)if(n){document.body.setAttribute("class","el-popup-parent--hidden");const E=document.querySelector(".layout-container"),v=document.createElement("div");return v.setAttribute("class","layout-aside-mobile-mode"),E.appendChild(v),v.addEventListener("click",a),[C,"layout-aside-mobile","layout-aside-mobile-open"]}else return a(),[C,"layout-aside-mobile","layout-aside-mobile-close"];else return e==="columns"?n?[C,"layout-aside-pc-1"]:[C,"layout-aside-pc-220"]:n?[C,"layout-aside-pc-64"]:[C,"layout-aside-pc-220"]}),a=()=>{const e=document.querySelector(".layout-aside-mobile-mode");e==null||e.setAttribute("style","animation: error-img-two 0.3s"),setTimeout(()=>{var h;(h=e==null?void 0:e.parentNode)==null||h.removeChild(e)},300),document.body.clientWidth<1e3&&(i.value.isCollapse=!1),document.body.setAttribute("class","")},c=S(()=>{let{layout:e,isShowLogo:n}=i.value;return n&&e==="defaults"||n&&e==="columns"}),s=()=>{if(i.value.layout==="columns")return!1;o.menuList=F(u.value)},F=e=>e.filter(n=>!n.meta.isHide).map(n=>(n=Object.assign({},n),n.children&&(n.children=F(n.children)),n)),R=e=>{o.clientWidth=e},D=e=>{let{layout:n}=i.value;if(n!=="columns")return!1;e||t.mittBus.emit("restoreDefault"),l.setColumnsMenuHover(e)};return w(i.value,e=>{if(e.isShowLogoChange!==e.isShowLogo){if(!t.$refs.layoutAsideScrollbarRef)return!1;t.$refs.layoutAsideScrollbarRef.update()}}),w(K.state,e=>{let{layout:n,isClassicSplitMenu:h}=e.themeConfig.themeConfig;if(n==="classic"&&h)return!1;s()},{deep:!0}),O(()=>{R(document.body.clientWidth),s(),t.mittBus.on("setSendColumnsChildren",e=>{o.menuList=e.children}),t.mittBus.on("setSendClassicChildren",e=>{let{layout:n,isClassicSplitMenu:h}=i.value;n==="classic"&&h&&(o.menuList=[],o.menuList=e.children)}),t.mittBus.on("getBreadcrumbIndexSetFilterRoutes",()=>{s()}),t.mittBus.on("layoutMobileResize",e=>{R(e.clientWidth),a()})}),{setCollapseStyle:r,setShowLogo:c,isTagsViewCurrenFull:p,onAsideEnterLeave:D,...M(o)}}}),oe={class:"h100"};function ie(t,l,m,f,u,i){const p=d("Logo"),o=d("Vertical"),r=d("el-scrollbar"),a=d("el-aside");return U((g(),B("div",oe,[b(a,{class:x(["layout-aside",t.setCollapseStyle])},{default:y(()=>[t.setShowLogo?(g(),L(p,{key:0})):Y("",!0),b(r,{class:"flex-auto",ref:"layoutAsideScrollbarRef",onMouseenter:l[0]||(l[0]=c=>t.onAsideEnterLeave(!0)),onMouseleave:l[1]||(l[1]=c=>t.onAsideEnterLeave(!1))},{default:y(()=>[b(o,{menuList:t.menuList},null,8,["menuList"])]),_:1},512)]),_:1},8,["class"])],512)),[[X,!t.isTagsViewCurrenFull]])}var ce=I(ne,[["render",ie]]);export{ce as A};
