import{r as u,_ as V,b as C,o as I,p as g}from"./index.1660443802877.js";import{P as v,r as M,f as k,y as U,V as $,W as l,T as x,a8 as m,j as D,a1 as s,$ as y,a0 as c,l as f}from"./vue.1660443802877.js";const h="/api/system/warehouse/";function P(e){return u({url:h,method:"get",params:e})}function R(e){return u({url:h+e.id+"/",method:"put",data:e})}function L(e){return u({url:h+e+"/",method:"delete",data:{id:e}})}const S="/api/system/warehouseLog/";function b(e){return u({url:S,method:"post",data:e})}const Q=v({name:"operateCheck",setup(){const{t:e}=C(),{transformRes:_}=I(),p=M(),F=k({border:!0,showHeaderOverflow:!0,showOverflow:!0,keepSource:!0,id:"full_edit_1",height:600,rowConfig:{keyField:"id",isHover:!0},columnConfig:{resizable:!0},customConfig:{storage:!0,checkMethod({column:r}){return!["nickname","role"].includes(r.field)}},printConfig:{columns:[{field:"FMaterialId"},{field:"FMaterialName"},{field:"FStockUnitId"},{field:"FModel"},{field:"FStockID"},{field:"binCode"},{field:"FQty"}]},sortConfig:{trigger:"cell",remote:!0},filterConfig:{remote:!0},pagerConfig:{pageSize:10,pageSizes:[5,10,15,20,50,100,200,500,1e3,5e3]},toolbarConfig:{buttons:[{code:"insert_actived",name:e("message.button.add")},{code:"delete",name:e("message.button.delete")},{code:"save",name:e("message.button.save"),status:"success"}],refresh:!0,print:!0,zoom:!0,custom:!0,size:"mini"},proxyConfig:{seq:!0,sort:!0,filter:!0,form:!0,props:{result:"result",total:"page.total"},ajax:{query:({page:r,sorts:n,filters:i,form:o})=>{const d=Object.assign({},o);d.limit=r.pageSize,d.page=r.currentPage;const t=n[0];return t&&(d.sort=t.field,d.order=t.order),i.forEach(({field:a,values:w})=>{d[a]=w.join(",")}),Object.keys(d).forEach(a=>{d[a]||delete d[a]}),_(P(d))},delete:async({body:r})=>{r.removeRecords.every(async o=>o?(o.operate="delete",await b(o),await L(o.id)):!1),p.value.commitProxy("reload")},save:async({body:r})=>{r.updateRecords.every(async o=>o?(o.operate="update",await b(o),await R(o)):!1),p.value.commitProxy("reload")}}},columns:[{type:"checkbox",title:"ID",width:80},{field:"FMaterialId",title:e("app.warehouse.FMaterialId"),width:120,sortable:!0},{field:"FMaterialName",title:e("app.warehouse.FMaterialName"),width:100,sortable:!0},{field:"FModel",title:e("app.warehouse.FModel"),width:80},{field:"FNumber",title:e("app.warehouse.FNumber")},{field:"FStockID",title:e("app.location.FStockID"),width:80},{field:"binCode",title:e("app.location.binCode"),width:80},{field:"FCustomerID",title:e("app.warehouse.FCustomerID"),width:80,editRender:{name:"input",attrs:{placeholder:e("app.operatePlaceholder.input")+e("app.warehouse.FCustomerID")}}},{field:"FLot",title:e("app.warehouse.FLot"),sortable:!0,width:120,editRender:{},slots:{edit:"FLot_edit"}},{field:"FStockUnitId",title:e("app.warehouse.FStockUnitId"),width:100,editRender:{name:"input",attrs:{placeholder:e("app.operatePlaceholder.input")+e("app.material.FMaterialName")}}},{field:"FQty",title:e("app.warehouse.FQty"),width:120,editRender:{name:"$input",props:{type:"float",digits:0}},slots:{edit:"FQty_edit"}},{field:"expires",title:e("app.warehouse.expires"),width:100,editRender:{},slots:{edit:"expires_edit"}},{field:"pack_sp",title:e("app.warehouse.pack_sp"),width:100,editRender:{name:"input",attrs:{placeholder:e("app.operatePlaceholder.input")+e("app.warehouse.pack_sp")}}},{field:"mini_pack",title:e("app.warehouse.mini_pack"),width:100,editRender:{name:"input",attrs:{placeholder:e("app.operatePlaceholder.input")+e("app.warehouse.mini_pack")}}},{field:"update_datetime",title:e("app.core.update_datetime"),width:160,visible:!1,sortable:!0,formatter({cellValue:r}){return g.toDateString(r,"yyyy-MM-dd HH:ss:mm")}},{field:"create_datetime",title:e("app.core.create_datetime"),width:160,visible:!1,sortable:!0,formatter({cellValue:r}){return g.toDateString(r,"yyyy-MM-dd")}}],checkboxConfig:{labelField:"id",reserve:!0,highlight:!0,range:!0},editRules:{FQty:[{required:!0,message:e("app.operatePlaceholder.input")+e("app.warehouse.FQty")}]},editConfig:{trigger:"click",mode:"row",showStatus:!0},formConfig:{items:[{field:"id",title:"ID",itemRender:{},slots:{default:"id_item"}},{field:"FLot",title:e("app.warehouse.FLot"),itemRender:{},slots:{default:"FLot_item"}},{field:"material__FMaterialId",title:e("app.warehouse.FMaterialId"),itemRender:{},slots:{default:"FMaterialId_item"}},{field:"location__binCode",title:e("app.location.binCode"),itemRender:{},slots:{default:"binCode_item"}},{itemRender:{},slots:{default:"submit_item"}},{itemRender:{},slots:{default:"reset_item"}}]}});return U(()=>{}),{xGrid:p,gridOptions:F}}}),N={style:{color:"red"}},O=f("img",{src:"https://pic2.zhimg.com/50/v2-f7031359103859e1ed38559715ef5f3f_hd.gif"},null,-1);function j(e,_,p,F,r,n){const i=m("vxe-input"),o=m("vxe-button"),d=m("vxe-grid");return D(),$(d,x({ref:"xGrid"},e.gridOptions),{id_item:l(({data:t})=>[s(i,{modelValue:t.id,"onUpdate:modelValue":a=>t.id=a,type:"number",placeholder:"id",clearable:""},null,8,["modelValue","onUpdate:modelValue"])]),binCode_item:l(({data:t})=>[s(i,{modelValue:t.location__binCode,"onUpdate:modelValue":a=>t.location__binCode=a,type:"text",placeholder:e.$t("app.operatePlaceholder.binCode"),clearable:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),FLot_item:l(({data:t})=>[s(i,{modelValue:t.FLot,"onUpdate:modelValue":a=>t.FLot=a,type:"number",placeholder:e.$t("app.operatePlaceholder.FLot"),clearable:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),FLot_edit:l(({row:t})=>[s(i,{modelValue:t.FLot,"onUpdate:modelValue":a=>t.FLot=a,type:"number",placeholder:e.$t("app.operatePlaceholder.input")+e.$t("app.warehouse.FLot"),clearable:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),FMaterialId_item:l(({data:t})=>[s(i,{modelValue:t.material__FMaterialId,"onUpdate:modelValue":a=>t.material__FMaterialId=a,type:"text",placeholder:e.$t("app.operatePlaceholder.FMaterialId"),clearable:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),FCustomerID_item:l(({data:t})=>[s(i,{modelValue:t.FCustomerID,"onUpdate:modelValue":a=>t.FCustomerID=a,type:"text",placeholder:e.$t("app.operatePlaceholder.FCustomerID"),clearable:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),expires_edit:l(({row:t})=>[s(i,{modelValue:t.expires,"onUpdate:modelValue":a=>t.expires=a,type:"date"},null,8,["modelValue","onUpdate:modelValue"])]),FQty_edit:l(({row:t})=>[s(i,{modelValue:t.FQty,"onUpdate:modelValue":a=>t.FQty=a,type:"number",placeholder:e.$t("app.operatePlaceholder.input")+e.$t("app.warehouse.FQty"),clearable:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),submit_item:l(()=>[s(o,{type:"submit",status:"primary"},{default:l(()=>[y(c(e.$t("message.button.search")),1)]),_:1})]),reset_item:l(()=>[s(o,{type:"reset"},{default:l(()=>[y(c(e.$t("message.button.reset")),1)]),_:1})]),empty:l(()=>[f("span",N,[O,f("p",null,c(e.$t("message.warning.noMoreData")),1)])]),_:1},16)}var A=V(Q,[["render",j]]);export{A as default};
